<!DOCTYPE html>
<html lang="en">

<head>
  <title>Messages</title>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  ****************************************************************************
    EXTERNAL RESOURCES
  ******************************************************************************-->

  <!-- FONT AWESOME LINK -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
    integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!--
****************************************************************************
  EXTERNAL STYLE SHEETS
******************************************************************************-->
  <!-- LAYOUT CSS CSS-->
  <link rel="stylesheet" href="/styles/layout.css" />
  <!-- MAIN CSS-->
  <link rel="stylesheet" href="/styles/messages-main.css" />
  <!-- HEADER CSS-->
  <link rel="stylesheet" href="/styles/header.css" />
  <!-- ITEM CSS-->
  <link rel="stylesheet" href="/styles/item.css" />

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
    integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!--
****************************************************************************
  JS SCRIPTS
******************************************************************************-->
  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>
  <script type="text/javascript" src="/scripts/messages.js"></script>

</head>

<body>
  <header>
    <%- include('partials/_header') %>
  </header>
  <main>
    <section class="messages-section">
      <section class="messages-box">
        <section class="messages-header">
          <div class="user-section">
            <a href="/inbox">
              <i class="fa-solid fa-circle-chevron-left"></i>
            </a>
            <img class="messages-header-pic" src="
            <% if (allMessages[0].sender_id === 1 && allMessages[0].isSender) { %>
              <%= allMessages[0].sender_pic %>
            <% } else { %>
              <%= allMessages[0].receiver_pic %>
            <% } %>" alt="Profile picture">
            <label class="messages-username">
              <% if (allMessages[0].sender_id === 1 && allMessages[0].isSender) { %>
                <%= allMessages[0].sender_username %>
              <% } else { %>
                <%= allMessages[0].receiver_username %>
              <% } %>
            </label>
          </div>
          <label class="messages-item-title">
            <%= allMessages[0].item_title %>
          </label>
        </section>

        <section class="messages-texts" id="messages-texts">
          <table class="messages-texts-table">
            <% for (let msg of allMessages) { %>
              <tr>
                <td>
                  <div class="<%= msg.sender_id === 1 ? 'messages-current-user' : 'messages-other-user'; %>">
                    <% if ( msg.sender_id === 1) { %>
                      <span><%= msg.message %></span>
                      <img class="messages-text-pic" src="<%= msg.sender_id === 1 ? msg.sender_pic : msg.receiver_pic ; %>" alt="Profile picture">
                    <% } else { %>
                      <img class="messages-text-pic" src="<%= msg.sender_id === 1 ? msg.sender_pic : msg.receiver_pic ; %>" alt="Profile picture">
                      <span><%= msg.message %></span>
                    <% } %>
                  </div>
                </td>
              </tr>
            <% } %>
          </table>
        </section>
      </section>

      <form class="new-message-form" method="post" action="">
        <input class="new-message" type="new-message" name="new-message" placeholder="Enter new message"
          style="margin-bottom: 1em" />
        <output id="tcounter" name="counter" class="counter" for="tweet-text">300</output>
        <button class="submit btn btn-primary">Send</button>
      </form>
    </section>




  </main>




</body>


</html>